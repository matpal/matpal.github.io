<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title></title>
  <!-- <link rel="stylesheet" type="text/css" href="css/normalize.css" /> -->
  <link rel="stylesheet" type="text/css" href="css/joint.css" />
  <!-- <link rel="stylesheet" type="text/css" href="skeleton.css" /> -->
  <link rel="stylesheet" type="text/css" href="css/materialize.css" />
  <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
  <link rel="stylesheet" type="text/css" href="css/custom.css" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>
<body>
  <div class="row">
    <div class="col s12">
      <ul class="tabs">
        <li class="tab col s3"><a href="#">Overview</a></li>
        <li class="tab col s3"><a href="#newElement">New...</a></li>
        <li class="tab col s3"><a href="#">Source Code</a></li>
      </ul>
    </div>
  </div>

    <div class="row">
      <div class="col s8" id="diagramContainer">
        <div id="paper" class=""></div>
      </div>

      <div class="col s4" id="sidebar">

      <div id="newElement">

        <label>Choose the new UML component</label>
        <ul class="collapsible" data-collapsible="accordion">
          <li>
            <div class="collapsible-header teal lighten-3">Abstract Class</div>
            <div class="collapsible-body">Abstract Class</div>
          </li>
          <li>
            <div class="collapsible-header teal lighten-3">Class</div>
            <div class="collapsible-body">

                <div class="input-field">
                  <input type="text" placeholder="Class name" id="className">
                  <label for="className">Class Name:</label>
                </div>

                <div class="input-field">
                    <select>
                      <option value="" disabled selected>Choose Stereotype</option>
                      <option value="activity">Activity</option>
                      <option value="broadcastReceiver">Broadcast Receiver</option>
                      <option value="contentProvider">Content Provider</option>
                      <option value="intent">Intent</option>
                      <option value="service">Service</option>
                      <option value="widget">Widget</option>
                    </select>
                    <label>Select</label>
                </div>



                  <div data-query="view(MemberFields)">
                    <div class="input-field">
                      <label for="propertiesList">Properties</label>
                      <input type="text" data-query="val(newMemberField.name).keydown(keydown)" placeholder="Add new property name and press enter" id="propertiesList">
                    </div>


                    <div data-query="each(memberFields)">
                      <div class="result-wrap">
                        <span data-query="visible(!editing())" class="value-holder">
                          {{name}}
                        </span>
                        <span data-query="visible(editing)" class="value-holder">
                          <input data-query="val(name)">
                        </span>
                        <span class="buttons-holder right">
                          <span data-query="click(toggleEdit).setClass('fa-check', editing).setClass('fa-pencil', !editing())" class="fa fa-lg fa-check"></span>

                          <span data-query="click(remove)"><i class="fa fa-lg fa-trash"></i></span>
                          </span>


                      </div>
                    </div>
                  </div>


                  <div  data-query="view(Methods)">
                    <div class="input-field">
                      <label>Methods</label>
                      <input type="text" data-query="val(newMethod.name).keydown(keydown)" placeholder="Add new method name and press enter" id="methodsList"/>
                    </div>

                    <div data-query="each(methods)">
                      <div class="result-wrap">
                        <span data-query="visible(!editing())" class="value-holder">
                          {{name}}
                        </span>
                        <span data-query="visible(editing)" class="value-holder">
                          <input data-query="val(name)">
                        </span>
                        <span class="buttons-holder right">
                          <span data-query="click(toggleEdit).setClass('fa-check', editing).setClass('fa-pencil', !editing())" class="fa fa-lg fa-check blue-text text-lighten-1"></span>

                          <span class="red-text" data-query="click(remove)"><i class="fa fa-lg fa-trash"></i></span>
                          </span>
                      </div>
                    </div>
                  </div>
                  <a class="waves-effect waves-light btn" style="margin-top:20px">Create class</a>
            </div>
          </li>
          <li>
            <div class="collapsible-header teal lighten-3">Interface</div>
            <div class="collapsible-body">Interface</div>
          </li>

          <li>
            <div class="collapsible-header teal lighten-3">Relation</div>
            <div class="collapsible-body">Relation</div>
          </li>
        </ul>

        <!--   <form id="diagramType">
          <div class="input-field" style="margin-bottom: 25%">
              <select>
                <option value="" disabled selected></option>
                <option value="newClass">Class</option>
                <option value="newInterface">Interface</option>
                <option value="newAbstractClass">Abstract Class</option>
                <option value="newRelation">Relation</option>
              </select>
              <label>Select</label>
          </div>

          </form> -->




      </div>   <!-- newElement -->





      </div>  <!-- three columns -->
    </div>


  <script src="js/jquery.min.js"></script>
  <script src="js/lodash.min.js"></script>
  <script src="js/backbone-min.js"></script>
  <script src="js/joint.js"></script>
  <script src="js/blocks.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/mycode.js"></script>

  <script type="text/javascript">
    // blocks.query({
    //   deleteButton: 'fa fa-pencil'
    // });

    var App = blocks.Application();

    var MemberField = App.Model({
      name: App.Property(),

      editing: blocks.observable(false),

      toggleEdit: function () {
        this.editing(!this.editing());
      },

      remove: function () {
        this.destroy(true);
      }
    });

    var Method = App.Model({
      name: App.Property(),

      editing: blocks.observable(false),

      toggleEdit: function () {
        this.editing(!this.editing());
      },

      remove: function () {
        this.destroy(true);
      }
    });

    var MemberFields = App.Collection(MemberField);
    var Methods = App.Collection(Method);

    App.View('MemberFields', {
      newMemberField: MemberField(),

      memberFields: MemberFields([]),

      keydown: function (e) {
        if (e.which == 13) {
          this.memberFields.add(this.newMemberField);
          this.newMemberField.reset();
        }
      }
    });

    App.View('Methods', {
      newMethod: Method(),

      methods: Methods([]),

      keydown: function (e) {
        if (e.which == 13) {
          this.methods.add(this.newMethod);
          this.newMethod.reset();
        }
      }
    });


    // UML DIAGRAM
    var graph = new joint.dia.Graph();

    var paper = new joint.dia.Paper({
      el: $('#paper'),
      width: 800,
      height: 600,
      gridSize: 1,
      model: graph
    });


    var uml = joint.shapes.uml;


    var classes = {

      mammal: new uml.Interface({
        position: { x:300  , y: 50 },
        size: { width: 240, height: 100 },
        name: 'Mammal',
        attributes: ['dob: Date'],
        methods: ['+ setDateOfBirth(dob: Date): Void','+ getAgeAsDays(): Numeric'],
        attrs: {
          '.uml-class-name-rect': {
            fill: '#feb662',
            stroke: '#ffffff',
            'stroke-width': 0.5
          },
          '.uml-class-attrs-rect, .uml-class-methods-rect': {
            fill: '#fdc886',
            stroke: '#fff',
            'stroke-width': 0.5
          },
          '.uml-class-attrs-text': {
            ref: '.uml-class-attrs-rect',
            'ref-y': 0.5,
            'y-alignment': 'middle'
          },
          '.uml-class-methods-text': {
            ref: '.uml-class-methods-rect',
            'ref-y': 0.5,
            'y-alignment': 'middle'
          }

        }
      }),

      person: new uml.Abstract({
        position: { x:300  , y: 300 },
        size: { width: 260, height: 100 },
        name: 'Person',
        attributes: ['firstName: String','lastName: String'],
        methods: ['+ setName(first: String, last: String): Void','+ getName(): String'],
        attrs: {
          '.uml-class-name-rect': {
            fill: '#68ddd5',
            stroke: '#ffffff',
            'stroke-width': 0.5
          },
          '.uml-class-attrs-rect, .uml-class-methods-rect': {
            fill: '#9687fe',
            stroke: '#fff',
            'stroke-width': 0.5
          },
          '.uml-class-methods-text, .uml-class-attrs-text': {
            fill: '#fff'
          }
        }
      }),

      bloodgroup: new uml.Class({
        position: { x:20  , y: 190 },
        size: { width: 220, height: 100 },
        name: 'BloodGroup',
        attributes: ['bloodGroup: String'],
        methods: ['+ isCompatible(bG: String): Boolean'],
        attrs: {
          '.uml-class-name-rect': {
            fill: '#ff8450',
            stroke: '#fff',
            'stroke-width': 0.5,
          },
          '.uml-class-attrs-rect, .uml-class-methods-rect': {
            fill: '#fe976a',
            stroke: '#fff',
            'stroke-width': 0.5
          },
          '.uml-class-attrs-text': {
            ref: '.uml-class-attrs-rect',
            'ref-y': 0.5,
            'y-alignment': 'middle'
          },
          '.uml-class-methods-text': {
            ref: '.uml-class-methods-rect',
            'ref-y': 0.5,
            'y-alignment': 'middle'
          }
        }
      }),

      address: new uml.Class({
        position: { x:630  , y: 190 },
        size: { width: 160, height: 100 },
        name: 'Address',
        attributes: ['houseNumber: Integer','streetName: String','town: String','postcode: String'],
        methods: [],
        attrs: {
          '.uml-class-name-rect': {
            fill: '#ff8450',
            stroke: '#fff',
            'stroke-width': 0.5
          },
          '.uml-class-attrs-rect, .uml-class-methods-rect': {
            fill: '#fe976a',
            stroke: '#fff',
            'stroke-width': 0.5,
          },
          '.uml-class-attrs-text': {
            'ref-y': 0.5,
            'y-alignment': 'middle'
          }
        },

      }),

      man: new uml.Class({
        position: { x:200  , y: 500 },
        size: { width: 180, height: 50 },
        name: 'Man',
        attrs: {
          '.uml-class-name-rect': {
            fill: '#ff8450',
            stroke: '#fff',
            'stroke-width': 0.5
          },
          '.uml-class-attrs-rect, .uml-class-methods-rect': {
            fill: '#fe976a',
            stroke: '#fff',
            'stroke-width': 0.5
          }
        }
      }),

      woman: new uml.Class({
        position: { x:450  , y: 500 },
        size: { width: 180, height: 50 },
        name: 'Woman',
        methods: ['+ giveABrith(): Person []'],
        attrs: {
          '.uml-class-name-rect': {
            fill: '#ff8450',
            stroke: '#fff',
            'stroke-width': 0.5
          },
          '.uml-class-attrs-rect, .uml-class-methods-rect': {
            fill: '#fe976a',
            stroke: '#fff',
            'stroke-width': 0.5
          },
          '.uml-class-methods-text': {
            'ref-y': 0.5,
            'y-alignment': 'middle'
          }
        }
      })


    };

    _.each(classes, function(c) { graph.addCell(c); });

    var relations = [
    new uml.Generalization({ source: { id: classes.man.id }, target: { id: classes.person.id }}),
    new uml.Generalization({ source: { id: classes.woman.id }, target: { id: classes.person.id }}),
    new uml.Implementation({ source: { id: classes.person.id }, target: { id: classes.mammal.id }}),
    new uml.Aggregation({ source: { id: classes.person.id }, target: { id: classes.address.id }}),
    new uml.Composition({ source: { id: classes.person.id }, target: { id: classes.bloodgroup.id }})
    ];

    _.each(relations, function(r) { graph.addCell(r); });

  </script>
</body>
</html>
